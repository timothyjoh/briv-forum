<div class="row push-down">
  <div class="col-sm-10 col-sm-offset-1 hid">
      <div class="row">
          <div class="col-sm-6 col-sm-offset-3">
              <div class="well">

                <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
                  <fieldset>
                    <legend>
                    <%= image_tag(current_user.avatar_url(:thumbnail), :width => 64, :height => 64, class: 'avatar') if current_user.avatar_url %>
                    Edit <%= current_user.username %>
                    </legend>

                    <%= render "devise/shared/error_messages", resource: resource %>

                    <div class="form-group">
                        <%= f.label :email, class: 'control-label' %>
                        <%= f.email_field :email, autofocus: true, autocomplete: "email", class: 'form-control' %>
                    </div>

                    <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
                      <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
                    <% end %>

                    <div class="form-group">
                        <%= f.label :username, class: 'control-label' %>
                        <%= f.text_field :username, autocomplete: "username", class: 'form-control' %>
                    </div>

                    <hr />

                    <div class="form-group">
                        <%= f.hidden_field :avatar_cache %>
                        <%= f.label :avatar, class: 'control-label' %>
                        <%= f.file_field :avatar, class: 'form-control' %>
                    </div>

                    <hr />

                    <div class="form-group">
                        <%= f.label :password, class: 'control-label' %>
                        <%= f.password_field :password, autocomplete: "new-password", class: 'form-control' %>
                    </div>

                    <div class="form-group">
                        <%= f.label :password_confirmation, class: 'control-label' %>
                        <%= f.password_field :password_confirmation, autocomplete: "new-password", class: 'form-control' %>
                    </div>

                    <hr />

                    <div class="form-group">
                        <%= f.label :current_password, class: 'control-label' %>
                        <%= f.password_field :current_password, autocomplete: "current-password", class: 'form-control' %>
                        <i>(we need your current password to confirm your changes)</i>
                    </div>

                    <div class="form-group">
                      <div class="text-right">
                        <button type="reset" class="btn btn-default">Cancel</button>
                        <button type="submit" class="btn btn-primary">Submit changes</button>
                      </div>
                    </div>
                  </fieldset>
                <% end %>

              </div>
          </div>
      </div>
  </div>
</div>


<div class="row push-down">
  <div class="col-sm-10 col-sm-offset-1 hid">
      <div class="row">
          <div class="col-sm-6 col-sm-offset-3">
              <div class="well">
                  <fieldset>
                    <legend>Cancel my account</legend>
                    <p>Unhappy?
                    <%= button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, class: 'btn btn-warning' %>
                    </p>
                  </fieldset>
              </div>
          </div>
      </div>
  </div>
</div>
